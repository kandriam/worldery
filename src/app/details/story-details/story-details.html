<div class="details-heading">
    <h2 class="story-title">{{ worldStory?.title }}</h2>
    <button class="delete-button secondary" (click)="deleteStory()">Delete Story</button>
</div>

<article>
    <div class="story-page-layout">
        <!-- Main Content Area -->
        <div class="story-main-content">
            <form [formGroup]="applyForm" (submit)="submitApplication()">
        <section class="edit-story-form story-page-body">
            <div class="details-section primary-section horizontal-section">
                <div class="details-section secondary-section">
                    <label class="primary-label" for="story-title">Story Title</label>
                    <input id="story-title" type="text" formControlName="storyTitle" placeholder="Enter story title..." />
                </div>
            </div>
            
            <div class="details-section primary-section spanning-section">
                <div class="details-section secondary-section">
                    <label class="primary-label" for="story-description">Story Description</label>
                    <textarea id="story-description" class="large-textarea" formControlName="storyDescription" placeholder="Describe the plot, themes, and key events of this story..."></textarea>
                </div>
            </div>
            
            <div class="details-section primary-section spanning-section">
                <div class="details-section secondary-section">
                    <app-association-list
                        [items]="getCharactersAssociationList()"
                        [label]="'Story Characters'"
                        [type]="'character'"
                        (itemToggled)="onCharacterToggle($event)">
                    </app-association-list>
                </div>
                <div class="details-section secondary-section">
                    <app-association-list
                        [items]="getLocationsAssociationList()"
                        [label]="'Story Locations'"
                        [type]="'location'"
                        (itemToggled)="onLocationToggle($event)">
                    </app-association-list>
                </div>
                <div class="details-section secondary-section">
                    <label class="primary-label" for="story-tags">Story Tags</label>
                    <textarea class="small-textarea" id="story-tags" formControlName="storyTags" placeholder="Enter tags separated by commas..."></textarea>
                </div>
                </div>
            </section>
            
            <button type="submit" class="save-button primary">Save</button>
            </form>
        </div>
        
        <!-- Timeline Sidebar -->
        <div class="timeline-sidebar">
            <app-timeline 
                [events]="filteredEventList" 
                [title]="'Events in ' + (worldStory?.title || '')"
                [noResultsMessage]="'No events found for this story'"
                orientation="vertical"
                (tagClicked)="onTimelineTagClicked($event)">
            </app-timeline>
        </div>
    </div>
</article>