<div class="details-heading">
    <h2 class="location-title">{{ worldLocation?.name }}</h2>
    <button class="delete-button secondary" (click)="deleteLocation()">Delete Location</button>
</div>

<article>
    <div class="page-layout">
        <!-- Main Content Area -->
        <div class="main-content">
            <form [formGroup]="applyForm" (submit)="submitApplication()">
            <section class="edit-location-form location-page-body">
                <div class="details-section primary-section horizontal-section">
                    <div class="details-section secondary-section">
                        <label class="primary-label" for="location-title">Location Title</label>
                        <input id="location-title" type="text" formControlName="locationTitle" placeholder="Enter location name..." />
                    </div>
                </div>
                
                <div class="details-section primary-section spanning-section">
                    <div class="details-section secondary-section">
                        <label class="primary-label" for="location-description">Location Description</label>
                        <textarea id="location-description" class="medium-textarea" formControlName="locationDescription" placeholder="Describe this location, its appearance, atmosphere, and significance..."></textarea>
                    </div>
                </div>
                
                <div class="details-section primary-section horizontal-section">
                    <div class="details-section secondary-section">
                        <app-association-list
                            [items]="getCharactersAssociationList()"
                            [label]="'Location Characters'"
                            [type]="'character'"
                            (itemToggled)="onCharacterToggle($event)">
                        </app-association-list>
                    </div>
                    <div class="details-section secondary-section">
                        <app-association-list
                            [items]="getStoriesAssociationList()"
                            [label]="'Location Stories'"
                            [type]="'story'"
                            (itemToggled)="onStoryToggle($event)">
                        </app-association-list>
                    </div>
                    <div class="details-section secondary-section">
                        <app-association-list
                            [items]="getRelatedLocationsAssociationList()"
                            [label]="'Related Locations'"
                            [type]="'location'"
                            (itemToggled)="onRelatedLocationToggle($event)">
                        </app-association-list>
                    </div>
                </div>
                
                <div class="details-section primary-section horizontal-section">
                    <div class="details-section secondary-section">
                        <label class="primary-label" for="location-tags">Location Tags</label>
                        <textarea class="small-textarea" id="location-tags" formControlName="locationTags" placeholder="Enter tags separated by commas..."></textarea>
                    </div>
                </div>
            </section>
            
            <button type="submit" class="save-button primary">Save</button>
            </form>
        </div>
        
        <!-- Timeline Sidebar -->
        <div class="timeline-sidebar">
            <app-timeline 
                [events]="filteredEventList" 
                [title]="'Events at ' + (worldLocation?.name || '')"
                [noResultsMessage]="'No events found at this location'"
                [allowAddElement]="false"
                [showDisplayToggles]="false"
                orientation="vertical"
                (tagClicked)="onTimelineTagClicked($event)">
            </app-timeline>
        </div>
    </div>
</article>